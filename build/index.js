(()=>{"use strict";const e=window.React,o=window.wp.hooks,t=window.wp.compose,l=window.wp.blockEditor,a=window.wp.components,r=window.wp.element,n="cafejp/cover",c=(0,t.createHigherOrderComponent)((o=>t=>{const{attributes:n,setAttributes:c,name:i}=t;if("core/cover"!==i)return(0,e.createElement)(o,{...t});const{loopVideo:p,autoplayVideo:s,showPlayButton:d,coverImage:u}=n,m=(Array.isArray(t.children)?t.children.filter(Boolean):[]).map(((e,o)=>e&&"video"===e.type?(0,r.cloneElement)(e,{loop:p,autoPlay:s,poster:u||e.props.poster,key:o}):e)),y=d?(0,e.createElement)("div",{className:"wp-block-cover__play-button-overlay",style:{position:"absolute",zIndex:10}},(0,e.createElement)("button",{className:"wp-block-cover__play-button","aria-label":"Play Video"})):null;return(0,e.createElement)(r.Fragment,null,(0,e.createElement)(o,{...t}),(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:"Video Options",initialOpen:!0},(0,e.createElement)(a.ToggleControl,{label:"Loop Video",checked:p,onChange:e=>c({loopVideo:e})}),(0,e.createElement)(a.ToggleControl,{label:"Autoplay Video",checked:s,onChange:e=>c({autoplayVideo:e})}),(0,e.createElement)(a.ToggleControl,{label:"Show Play Button",checked:d,onChange:e=>c({showPlayButton:e})}),(0,e.createElement)(a.TextControl,{label:"Cover Image URL",value:u,onChange:e=>c({coverImage:e}),help:"This image will be used as the cover image for the video."}))),(0,e.createElement)("div",{...t.blockProps},m,y))}),"withCoverControls");(0,o.addFilter)("blocks.registerBlockType",n,(function(e,o){return"core/cover"!==o?e:{...e,attributes:{...e.attributes,loopVideo:{type:"boolean",default:!1},autoplayVideo:{type:"boolean",default:!1},showPlayButton:{type:"boolean",default:!0},coverImage:{type:"string",default:""}}}})),(0,o.addFilter)("editor.BlockEdit",n,c),(0,o.addFilter)("blocks.getSaveElement",n,((o,t,l)=>{if("core/cover"!==t.name)return o;const{loopVideo:a,autoplayVideo:n,showPlayButton:c,coverImage:i}=l,p=(Array.isArray(o.props.children)?o.props.children.filter(Boolean):[]).map((e=>e&&"video"===e.type?(0,r.cloneElement)(e,{loop:a,autoPlay:n,poster:i||e.props.poster}):e)),s=c?(0,e.createElement)("div",{className:"wp-block-cover__play-button-overlay",style:{position:"absolute",zIndex:10}},(0,e.createElement)("button",{className:"wp-block-cover__play-button","aria-label":"Play Video"})):null;return(0,e.createElement)("div",{...o.props},p,s)}))})();